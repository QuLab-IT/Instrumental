<?xml version="1.0" encoding="Windows-1252"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:id="FM Subsystem Introduction" MadCap:timeEstimate="0" MadCap:priority="0" MadCap:status="In Progress" MadCap:ignoredWords="n" MadCap:tocPath="Agilent 33500 Series Operating and Service Guide|SCPI Programming Reference|Alphabetical List of SCPI Commands and Queries" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="HtmlHelp" MadCap:PathToHelpSystem="../" MadCap:HelpSystemFileName="Agilent_33500_Series_Operating_and_Service_Guide.xml" MadCap:SearchType="Stem">
    <head>
        <link href="../RegTable.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>FM Subsystem</title>
        <link rel="StyleSheet" href="../dds_best_rh.css" />
        
        
        
        
        
    </head>
    <body>
        <h1>FM Subsystem<a name="kanchor108"></a></h1>
        <p>This summarizes the steps required to generate a frequency modulation (FM) waveform.</p>
        <ol style="list-style: decimal;list-style-type: decimal;">
            <li class="IndentTight" value="1"><b>Configure carrier waveform:</b> Use <a href="FUNCtion_Subsystem.htm#FUNCtion">FUNCtion</a>, <a href="FREQuency_Subsystem.htm#FREQuency">FREQuency</a>, <a href="VOLTage_Subsystem.htm#VOLTage">VOLTage</a>, and <a href="VOLTage_Subsystem.htm#VOLTage_OFFSet">VOLTage:OFFSet</a>  to specify the carrier waveform's function, frequency, amplitude, and offset.</li>
            <li class="IndentTight" value="2"><b>Select modulation source (internal, external, CH1, or CH2):</b><a href="01%20(Modulation)_SOURce.htm">FM:SOURce</a>. For an external modulation source, skip steps 3 and 4.</li>
            <li class="IndentTight" value="3"><b>Select modulating waveform:</b> <a href="#FM_INTernal_FUNCtion">FM:INTernal:FUNCtion</a></li>
            <li class="IndentTight" value="4"><b>Set modulating 
 frequency:</b> <a href="#FM_INTernal_FREQuency">FM:INTernal:FREQuency</a></li>
            <li class="IndentTight" value="5"><b>Set peak 
 frequency deviation:</b> <a href="#FM_DEViation">FM:DEViation</a></li>
            <li class="IndentTight" value="6"><b>Enable FM:</b><a href="02%20(Modulation)_STATe.htm">FM:STATe:ON</a>
            </li>
        </ol>
        <p>The following code produces the oscilloscope image shown below.</p>
        <p class="Shaded">FUNCtion SQU<br />FREQuency +4.0E+05<br />VOLTage +1.0<br />VOLTage:OFFset 0.0<br />FM:SOURce INT<br />FM:DEViation +3.5e5<br />FM:INTernal:FREQuency +5e4<br />FM:INTernal:FUNCtion RAMP<br />FM:STATe 1<br />OUTP 1</p>
        <p>
            <img src="../_Graphics_/scope_4d.png" />
        </p>
        <h2><a name="kanchor109"></a><a name="FM_DEViation"></a>[SOURce[1|2]:]FM[:DEViation] {&lt;<i>peak_deviation_in_Hz</i>&gt;|MINimum|MAXimum}<br />[SOURce[1|2]:]FM[:DEViation]?  [{MINimum|MAXimum}]</h2>
        <p class="IndentTight">Sets the peak frequency deviation in Hz. This value represents 
 the peak variation in frequency of the <i>modulated</i> waveform from the carrier frequency.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">1 &#956;Hz to 15.05 (limited to 150 kHz for RAMP); default 100 Hz</td>
                    <td class="BodyD-Column1-Body1">+1.000000000000000E+03</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">
                        <p colspan="2">Set peak frequency deviation to 1 kHz:<br />FM:DEV 1000<br /></p>
                        <p colspan="2">Set peak frequency deviation to 1 &#956;Hz:<br />FM:DEV MIN</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">The deviation cannot exceed the carrier frequency. If you attempt to set a deviation that exceeds the carrier 
 frequency (with FM enabled), the instrument will  adjust the deviation to the maximum value allowed for that carrier frequency. <i>From the remote interface, a "Settings conflict" error will also be generated.</i></li>
            <li class="IndentTight" value="2">The carrier frequency plus the deviation cannot exceed the selected function's maximum frequency plus 100 kHz. If you attempt to set the deviation to an invalid value, the instrument adjusts it to the maximum value allowed with the present carrier frequency. The remote interface also generates a "Data out of range" error.</li>
            <li class="IndentTight" value="3">If the deviation causes the carrier waveform to 
 exceed a frequency boundary for the current duty cycle (square waveform 
 only), the instrument will adjust the duty cycle 
 to the maximum value allowed with the present carrier frequency. <i>From the remote interface, a "Settings conflict" error will also be generated.</i></li>
            <li class="IndentTight" value="4">If you select the <i>External</i> modulating source, the deviation is controlled by the ±5 V signal level on the rear-panel <b>Modulation In</b> connector.For example, if the frequency deviation is 100 kHz, then a +5 V signal level corresponds to a 100 kHz increase in frequency.Lower external signal levels produce less deviation and negative signal levels reduce the frequency below the carrier frequency.</li>
        </ul>
        <h2><a name="kanchor110"></a><a name="FM_INTernal_FREQuency"></a>[SOURce[1|2]:]FM:INTernal:FREQuency {&lt;<i>frequency</i>&gt;|MINimum|MAXimum}<br />[SOURce[1|2]:]FM:INTernal:FREQuency?  [{MINimum|MAXimum}] 
</h2>
        <p class="IndentTight">Sets the frequency of the modulating waveform. The modulating source waveform operates at that frequency, within the frequency limits of that waveform.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">1 &#956;Hz to the maximum allowed for the internal function. Default 10 Hz</td>
                    <td class="BodyD-Column1-Body1">+1.000000000000000E+04</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">Set the modulating frequency to 10 kHz:<br />FM:INT:FREQ 10000
                    </td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">When you select an arbitrary waveform as the modulating source, the frequency changes to the frequency of the arbitrary waveform, which is based on the sample rate and the number of points in the arbitrary waveform.</li>
            <li class="IndentTight" value="2">When using an arbitrary waveform for the modulating source, changing this parameter also changes the cached metadata representing the arbitrary waveform's sample rate. You can also change the modulating frequency of an arbitrary waveform with <a href="FUNCtion_Subsystem.htm#FUNCtion_ARBitrary_FREQuency">FUNCtion:ARBitrary:FREQuency</a>, <a href="FUNCtion_Subsystem.htm#FUNCtion_ARBitrary_PERiod">FUNCtion:ARBitrary:PERiod</a>, and <a href="FUNCtion_Subsystem.htm#FUNCtion_ARBitrary_SRATe">FUNCtion:ARBitrary:SRATe</a>.  These commands and the modulation frequency command are directly coupled in order to keep the arbitrary waveform  behaving exactly as it was last played. If you later turn modulation off and select that same arbitrary waveform as the current function, its sample rate (and corresponding frequency based upon the number of points) will be the same as it was when played as the modulation source.</li>
            <li class="IndentTight" value="3">If the internal function is TRIangle, UpRamp, or DnRamp, the maximum frequency limited to 200 kHz. If the internal function is PRBS, the frequency refers to bit rate and is limited to 50 Mbps.</li>
            <li class="IndentTight" value="4">This command should be used only with the internal modulation source  (<a href="01%20(Modulation)_SOURce.htm">FM:SOURce INTernal</a>).</li>
        </ul>
        <h2><a name="kanchor111"></a><a name="FM_INTernal_FUNCtion"></a>[SOURce[1|2]:]FM:INTernal:FUNCtion &lt;<i>function</i>&gt;<br />[SOURce[1|2]:]FM:INTernal:FUNCtion?</h2>
        <p class="IndentTight">This command selects the shape of the modulating waveform.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">{SINusoid|SQUare|RAMP|NRAMp|TRIangle|NOISe|PRBS|ARB}, default SINusoid<br /><a href="Internal%20Function%20Waveforms.htm">View internal function waveforms.</a></td>
                    <td class="BodyD-Column1-Body1">SIN, SQU, RAMP, NRAM, TRI, NOIS, PRBS, or ARB</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">Select a sine wave as the modulating waveform.<br />FM:INT:FUNC SIN
                    </td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">This command should be used only with the internal modulation source  (FM:SOURce INTernal).</li>
            <li class="IndentTight" value="2">Some combinations of carrier and internal function are not allowed: PRBS carrier and PRBS internal function, ARB carrier and ARB internal function.</li>
            <li class="IndentTight" value="3">You can use noise as the modulating waveform, but you cannot use noise, pulse, or DC as the carrier.</li>
        </ul>
        
    </body>
</html>