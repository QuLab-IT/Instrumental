<?xml version="1.0" encoding="Windows-1252"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Agilent 33500 Series Operating and Service Guide|SCPI Programming Reference|Alphabetical List of SCPI Commands and Queries" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="HtmlHelp" MadCap:PathToHelpSystem="../" MadCap:HelpSystemFileName="Agilent_33500_Series_Operating_and_Service_Guide.xml" MadCap:SearchType="Stem">
    <body>
        <h1>PWM Subsystem<a name="kanchor266"></a></h1>
        <p>The PWM subsystem allows you to perform pulse width modulation (PWM) on a pulse waveform.</p>
        <h2>Example</h2>
        <p>This summarizes the steps required to generate  a PWM waveform.</p>
        <ol style="list-style: decimal;list-style-type: decimal;">
            <li class="IndentTight" value="1"><b>Configure carrier waveform:</b> Use <a href="FUNCtion_Subsystem.htm#FUNCtion">FUNCtion</a>, <a href="FREQuency_Subsystem.htm#FREQuency">FREQuency</a>, <a href="VOLTage_Subsystem.htm#VOLTage">VOLTage</a>, and <a href="VOLTage_Subsystem.htm#VOLTage_OFFSet">VOLTage:OFFSet</a>  to specify the carrier waveform's function, frequency, amplitude, and offset.</li>
            <li class="IndentTight" value="2"><b>Select modulation source (internal, external, CH1, or CH2):</b> <a href="01%20(Modulation)_SOURce.htm">PWM:SOURce</a>. For an external modulation source, skip steps 3 and 4.</li>
            <li class="IndentTight" value="3"><b>Select modulating waveform:</b> <a href="#PWM:INTernal:FUNCtion">PWM:INTernal:FUNCtion</a></li>
            <li class="IndentTight" value="4"><b>Set modulating frequency:</b> <a href="#PWM_INTernal_FREQuency">PWM:INTernal:FREQuency</a></li>
            <li class="IndentTight" value="5"><b>Set pulse width or duty cycle deviation:</b><a href="#PWM_DEViation">PWM:DEViation</a> or <a href="#PWM_DEViation_DCYCle">PWM:DEViation:DCYCle</a></li>
        </ol>
        <ol start="6" style="list-style: decimal;list-style-type: decimal;">
            <li class="IndentTight" value="6"><b>Enable PWM:</b> <a href="02%20(Modulation)_STATe.htm">PWM:STATe:ON</a></li>
        </ol>
        <p>The following code produces the oscilloscope image shown below.</p>
        <p class="Shaded">FUNCtion PULS<br />FREQuency +5000.0<br />VOLTage +1.0<br />VOLTage:OFFS +0.0<br />PWM:DEViation +5.0E-05<br />PWM:DEViation:DCYCle +25.0<br />PWM:INTernal:FREQuency +1000.0<br />PWM:INTernal:FUNCtion RAMP<br />PWM:STATe 1<br />OUTPut1 1</p>
        <p>
            <img src="../_Graphics_/scope_7d.png" />
        </p>
        <h2><a name="kanchor267"></a><a name="PWM_DEViation"></a>[SOURce[1|2]:]PWM:DEViation {&lt;<i>deviation</i>&gt;|MINimum|MAXimum}<br />[SOURce[1|2]:]PWM:DEViation?  [{MINimum|MAXimum}]</h2>
        <p class="IndentTight">Sets pulse width deviation; the ± variation in width (in seconds) from the pulse width of the carrier pulse waveform.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">0 to 1000 (seconds); default 10 &#956;s</td>
                    <td class="BodyD-Column1-Body1">+1.000000000000000E+00</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">Set pulse width deviation to 1 s:<br />PWM:DEV 1<p>Set pulse width deviation to 0 s:<br />PWM:DEV MIN</p></td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">The deviation is a ± deviation, so if the pulse width is 10 ms and the deviation is 4 ms, the width can vary from 6 to 14 ms.</li>
            <li class="IndentTight" value="2">The pulse width deviation cannot exceed the current pulse width, and is also limited by the minimum pulse width (Wmin):</li>
        </ul>
        <p class="WithinList" style="margin-left: 85px;">Width Deviation &lt; Pulse Width – Wmin</p>
        <p class="WithinList" style="margin-left: 45px;">and</p>
        <p class="WithinList" style="margin-left: 85px;">Width Deviation &lt; Period – Pulse Width – Wmin</p>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">The pulse width deviation is limited by the current edge time setting.</li>
        </ul>
        <p class="WithinList" style="margin-left: 85px;">Width Deviation &lt; Pulse Width – (0.8 x Leading Edge Time) – (0.8 x Trailing Edge Time)</p>
        <p class="WithinList" style="margin-left: 45px;">and</p>
        <p class="WithinList" style="margin-left: 85px;">Width Deviation &lt; Period – Pulse Width – (0.8 x Leading Edge Time) – (0.8 x Trailing Edge Time)</p>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">If you select the External modulating source (<a href="01%20(Modulation)_SOURce.htm">PWM:SOURce EXTernal</a>), the deviation 
 is controlled by the ±5 V signal level present on the rear-panel <b>Modulation In</b> connector. For example, if you have set the width deviation to 10 &#956;s, then a +5 V signal level corresponds to a 10 &#956;s deviation. Lower external signal levels produce less deviation. Negative signal levels produce negative deviation.</li>
        </ul>
        <h2><a name="kanchor268"></a><a name="kanchor269"></a><a name="PWM_DEViation_DCYCle"></a>[SOURce[1|2]:]PWM:DEViation:DCYCle {&lt;<i>deviation_in_pct</i>&gt;|MINimum|MAXimum}<br />[SOURce[1|2]:]PWM:DEViation:DCYCle?  [{MINimum|MAXimum}] 
</h2>
        <p class="IndentTight">Sets duty cycle deviation in percent of period. This is the peak variation in duty cycle from the underlying pulse 
 waveform. For example, if duty cycle is 10% and duty cycle deviation is 5%, the duty cycle of the modulated waveform will vary from 5% to 15%.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">Duty cycle in percent of period, from 0 to 99.9; default approximately 1 percent</td>
                    <td class="BodyD-Column1-Body1">+5.000000000000000E+00</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">Set pulse width deviation to 5%:<br />PWM:DEV:DCYC 5</td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">Duty cycle deviation cannot exceed 
 pulse duty cycle.</li>
            <li class="IndentTight" value="2">Duty cycle deviation also limited by 
 minimum pulse width (Wmin):</li>
        </ul>
        <p class="WithinList" style="margin-left: 85px;">Duty Cycle Deviation &lt; Duty Cycle – 100 x Wmin ÷ Period<br /><br /></p>
        <p class="WithinList" style="margin-left: 45px;">and</p>
        <p class="WithinList" style="margin-left: 85px;">Duty Cycle Deviation &lt; 100 – Duty Cycle – 100 x Wmin ÷ Period</p>
        <p class="WithinList" style="margin-left: 85px;">
        </p>
        <p class="WithinList" style="margin-left: 85px;">where  Wmin = 16 ns.</p>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">Duty cycle deviation limited by edge time.</li>
        </ul>
        <p class="WithinList" style="margin-left: 85px;">Duty Cycle Dev &lt; Duty Cycle – (80 x Leading Edge Time) ÷ Period – (80 x Trailing Edge Time) ÷ Period</p>
        <p class="WithinList" style="margin-left: 45px;">and</p>
        <p class="WithinList" style="margin-left: 85px;">Duty Cycle Dev &lt; 100 – Duty Cycle – (80 x Leading Edge Time) ÷ Period – (80 x Trailing Edge Time) ÷ Period</p>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">With <a href="01%20(Modulation)_SOURce.htm">PWM:SOURce EXTernal</a>, deviation 
 is controlled by the ±5 V signal level on rear-panel <b>Modulation In</b> connector. For example, with duty cycle deviation of 5 percent, a +5 V signal level corresponds to 5% deviation, an additional 5% of period added to the pulse duty cycle. Lower external 
 signal levels produce less deviation, and negative signal levels reduce the duty cycle.</li>
        </ul>
        <h2><a name="kanchor270"></a><a name="PWM_INTernal_FREQuency"></a>[SOURce[1|2]:]PWM:INTernal:FREQuency {&lt;<i>frequency</i>&gt;|MAXimum|MINimum}<br />[SOURce[1|2]:]PWM:INTernal:FREQuency? [{MAXimum|MINimum}]</h2>
        <p class="IndentTight">Selects frequency at which output pulse width shifts through its pulse width deviation. The waveform used as the modulating source will operate at that frequency, within frequency limits of that waveform.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">1 &#956;Hz to the maximum allowed for the internal function. Default 10 Hz</td>
                    <td class="BodyD-Column1-Body1">+1.000000000000000E+02</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">Set internal PWM&#160;frequency to 100 Hz:<br />PWM:INT:FREQ 100</td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">When you select an arbitrary waveform as the modulating source, the frequency changes to the frequency of the arbitrary waveform, which is based on the sample rate and the number of points in the arbitrary waveform.</li>
            <li class="IndentTight" value="2">When using an arbitrary waveform for the modulating source, changing this parameter also changes the cached metadata representing the arbitrary waveform's sample rate. You can also change the modulating frequency of an arbitrary waveform with <a href="FUNCtion_Subsystem.htm#FUNCtion_ARBitrary_FREQuency">FUNCtion:ARBitrary:FREQuency</a>, <a href="FUNCtion_Subsystem.htm#FUNCtion_ARBitrary_PERiod">FUNCtion:ARBitrary:PERiod</a>, and <a href="FUNCtion_Subsystem.htm#FUNCtion_ARBitrary_SRATe">FUNCtion:ARBitrary:SRATe</a>.  These commands and the modulation frequency command are directly coupled in order to keep the arbitrary waveform  behaving exactly as it was last played. If you later turn modulation off and select that same arbitrary waveform as the current function, its sample rate (and corresponding frequency based upon the number of points) will be the same as it was when played as the modulation source.</li>
            <li class="IndentTight" value="3">If the internal function is TRIangle, UpRamp, or DnRamp, the maximum frequency limited to 200 kHz. If the internal function is PRBS, the frequency refers to bit rate and is limited to 50 Mbps.</li>
            <li class="IndentTight" value="4">This command should be used only with the internal modulation source  (<a href="01%20(Modulation)_SOURce.htm">PWM:SOURce INTernal</a>).</li>
        </ul>
        <h2><a name="kanchor271"></a><a name="PWM:INTernal:FUNCtion"></a>[SOURce[1|2]:]PWM:INTernal:FUNCtion &lt;<i>function</i>&gt;<br />[SOURce[1|2]:]PWM:INTernal:FUNCtion?</h2>
        <p class="IndentTight">Selects shape of the internal modulating waveform.</p>
        <table style="mc-table-style: url('../RegTable.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-RegTable" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Parameter</th>
                    <th class="HeadD-Column1-Header1">Typical Return</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">
                        <p>{SINusoid|SQUare|RAMP|NRAMp|TRIangle|NOISe|PRBS|ARB}, default SINusoid<br /><a href="Internal%20Function%20Waveforms.htm">View internal function waveforms.</a></p>
                    </td>
                    <td class="BodyD-Column1-Body1">SIN, SQU, RAMP, NRAM, TRI, NOIS, PRBS, or ARB</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyA-Column1-Body1" colspan="2">Select a sine wave as the modulating waveform shape:<br />PWM:INT:FUNC SIN</td>
                </tr>
            </tbody>
        </table>
        <ul type="disc" class="UL_Disc">
            <li class="IndentTight" value="1">This command should be used only with the internal modulation source  (<a href="01%20(Modulation)_SOURce.htm">PWM:SOURce INTernal</a>).</li>
        </ul>
        
    </body>
    <head>
        <link href="../RegTable.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>PWM Subsystem</title>
        <link rel="StyleSheet" href="../dds_best_rh.css" />
        
        
        
        
        
    </head>
</html>